{
	"info": {
		"_postman_id": "complete-workflow-collection",
		"name": "Hotelsystems.ai - Complete API Workflow",
		"description": "Complete workflow for Hotelsystems.ai Booking Management System\n\n**Workflow Order:**\n1. Setup Phase: Create Hotel → Create Room Type → Set Inventory\n2. Search Phase: Get Hotel → Search Offers → Recheck Offer\n3. Booking Phase: Create Booking → Confirm Booking → Get Booking\n4. Management Phase: Update Inventory, Cancel Booking\n\n**Authentication:**\n- All /v1/** endpoints require: `Authorization: Bearer user-123`\n- Health check is public (no auth required)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Setup Phase - Admin",
			"item": [
				{
					"name": "1.1 Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/actuator/health",
							"host": ["{{baseUrl}}"],
							"path": ["actuator", "health"]
						},
						"description": "Check if server is running (No authentication required)"
					},
					"response": []
				},
				{
					"name": "1.2 Create Hotel",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"hotel-001\",\n    \"name\": \"Grand Hotel Paris\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/hotels",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "hotels"]
						},
						"description": "Create a new hotel. The slug will be auto-generated from name (e.g., 'Grand Hotel Paris' → 'grand-hotel-paris')"
					},
					"response": []
				},
				{
					"name": "1.3 Create Room Type",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": \"DELUXE\",\n    \"name\": \"Deluxe Room\",\n    \"maxGuests\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/hotels/hotel-001/room-types",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "hotels", "hotel-001", "room-types"]
						},
						"description": "Create a room type for the hotel. Use hotel-001 from previous step."
					},
					"response": []
				},
				{
					"name": "1.4 Set Inventory (Bulk Upsert)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"roomTypeId\": \"DELUXE\",\n    \"startDate\": \"2025-01-15\",\n    \"endDate\": \"2025-01-25\",\n    \"allotmentQty\": 10,\n    \"stopSell\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/hotels/hotel-001/inventory/bulk-upsert",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "hotels", "hotel-001", "inventory", "bulk-upsert"]
						},
						"description": "Set inventory for date range. Creates/updates inventory rows for each date from startDate (inclusive) to endDate (exclusive).\n\n**Important:** Dates must be today or in the future!"
					},
					"response": []
				},
				{
					"name": "1.5 Get Inventory",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/v1/admin/hotels/hotel-001/inventory?roomTypeId=DELUXE&start=2025-01-15&end=2025-01-25",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "hotels", "hotel-001", "inventory"],
							"query": [
								{
									"key": "roomTypeId",
									"value": "DELUXE"
								},
								{
									"key": "start",
									"value": "2025-01-15"
								},
								{
									"key": "end",
									"value": "2025-01-25"
								}
							]
						},
						"description": "Get inventory for hotel with optional filters"
					},
					"response": []
				}
			],
			"description": "Admin setup phase - Create hotel, room types, and set inventory"
		},
		{
			"name": "2. Search Phase - Public",
			"item": [
				{
					"name": "2.1 Get Hotel by Slug",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/v1/hotels/grand-hotel-paris",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "hotels", "grand-hotel-paris"]
						},
						"description": "Get hotel information by slug. Slug is auto-generated from hotel name (lowercase, spaces → hyphens)"
					},
					"response": []
				},
				{
					"name": "2.2 Search Offers",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"checkIn\": \"2025-01-20\",\n    \"checkOut\": \"2025-01-23\",\n    \"guests\": 2,\n    \"roomsCount\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/hotels/grand-hotel-paris/offers:search",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "hotels", "grand-hotel-paris", "offers:search"]
						},
						"description": "Search available offers for a hotel. Returns list of available room types with pricing.\n\n**Save the offerId from response for next step!**"
					},
					"response": []
				},
				{
					"name": "2.3 Recheck Offer",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"offerId\": \"OWN-abc123def456\",\n    \"checkIn\": \"2025-01-20\",\n    \"checkOut\": \"2025-01-23\",\n    \"guests\": 2,\n    \"roomsCount\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/offers:recheck",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "offers:recheck"]
						},
						"description": "Recheck offer availability before booking. Use offerId from search offers response.\n\n**Possible results:**\n- OK: Offer still available\n- PRICE_CHANGED: Price changed\n- SOLD_OUT: No longer available"
					},
					"response": []
				}
			],
			"description": "Search phase - Get hotel info, search offers, and recheck availability"
		},
		{
			"name": "3. Booking Phase - Create & Confirm",
			"item": [
				{
					"name": "3.1 Create Booking (Minimal)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"hotelId\": \"hotel-001\",\n    \"roomTypeId\": \"DELUXE\",\n    \"checkIn\": \"2025-01-20\",\n    \"checkOut\": \"2025-01-23\",\n    \"guestName\": \"John Doe\",\n    \"guestEmail\": \"john.doe@example.com\",\n    \"guestPhone\": \"+1234567890\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/bookings",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings"]
						},
						"description": "Create a booking in DRAFT status (minimal payload).\n\n**Save the bookingId from response for next steps!**"
					},
					"response": []
				},
				{
					"name": "3.2 Create Booking (Extended)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"hotelId\": \"hotel-001\",\n    \"roomTypeId\": \"DELUXE\",\n    \"checkIn\": \"2025-01-20\",\n    \"checkOut\": \"2025-01-23\",\n    \"guestName\": \"Jane Smith\",\n    \"guestEmail\": \"jane.smith@example.com\",\n    \"guestPhone\": \"+9876543210\",\n    \"occupancy\": {\n        \"adults\": 2,\n        \"children\": 1\n    },\n    \"guests\": [\n        {\n            \"name\": \"Jane Smith\",\n            \"email\": \"jane.smith@example.com\",\n            \"phone\": \"+9876543210\"\n        },\n        {\n            \"name\": \"John Smith\",\n            \"email\": \"john.smith@example.com\",\n            \"phone\": \"+9876543211\"\n        }\n    ],\n    \"offerId\": \"OWN-abc123def456\",\n    \"roomsCount\": 1,\n    \"childrenAges\": [5],\n    \"priceSnapshot\": {\n        \"totalPrice\": {\n            \"amount\": 299.99,\n            \"currency\": \"USD\"\n        },\n        \"basePrice\": {\n            \"amount\": 250.00,\n            \"currency\": \"USD\"\n        },\n        \"taxes\": {\n            \"amount\": 30.00,\n            \"currency\": \"USD\"\n        },\n        \"fees\": {\n            \"amount\": 19.99,\n            \"currency\": \"USD\"\n        },\n        \"nights\": 3\n    },\n    \"policySnapshot\": {\n        \"cancellationPolicySummary\": \"Free cancellation until 24 hours before check-in\",\n        \"cancellationAllowed\": true,\n        \"checkInPolicy\": \"Check-in from 3:00 PM\",\n        \"checkOutPolicy\": \"Check-out until 11:00 AM\"\n    },\n    \"idempotencyKey\": \"unique-request-id-12345\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/bookings",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings"]
						},
						"description": "Create booking with extended fields (occupancy, guests list, snapshots, idempotency)"
					},
					"response": []
				},
				{
					"name": "3.3 Get Booking",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/v1/bookings/{{bookingId}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings", "{{bookingId}}"]
						},
						"description": "Get booking details by ID. Use bookingId from create booking response."
					},
					"response": []
				},
				{
					"name": "3.4 Confirm Booking",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/bookings/{{bookingId}}/confirm",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings", "{{bookingId}}", "confirm"]
						},
						"description": "Confirm a booking. This triggers:\n1. Recheck availability\n2. Reserve inventory\n3. Status: DRAFT → RECHECKING → PENDING_CONFIRMATION → CONFIRMED\n\n**Response Codes:**\n- 200 OK: Booking confirmed\n- 409 Conflict: Booking failed (sold out, price changed)"
					},
					"response": []
				},
				{
					"name": "3.5 Confirm Booking (with Idempotency)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"idempotencyKey\": \"confirm-request-12345\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/bookings/{{bookingId}}/confirm",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings", "{{bookingId}}", "confirm"]
						},
						"description": "Confirm booking with idempotency key for safe retries"
					},
					"response": []
				}
			],
			"description": "Booking phase - Create booking, get details, and confirm"
		},
		{
			"name": "4. Management Phase",
			"item": [
				{
					"name": "4.1 Update Hotel",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Grand Hotel Paris - Updated\",\n    \"active\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/hotels/hotel-001",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "hotels", "hotel-001"]
						},
						"description": "Update hotel information (name, active status)"
					},
					"response": []
				},
				{
					"name": "4.2 Update Room Type",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Deluxe Room - Updated\",\n    \"maxGuests\": 3,\n    \"active\": true\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/room-types/DELUXE",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "room-types", "DELUXE"]
						},
						"description": "Update room type (name, maxGuests, active status)"
					},
					"response": []
				},
				{
					"name": "4.3 Update Inventory Row",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"allotmentQty\": 15,\n    \"stopSell\": false\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/admin/inventory/{{inventoryRowId}}",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "admin", "inventory", "{{inventoryRowId}}"]
						},
						"description": "Update individual inventory row. Use inventoryRowId from get inventory response."
					},
					"response": []
				},
				{
					"name": "4.4 Cancel Booking",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/v1/bookings/{{bookingId}}/cancel",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "bookings", "{{bookingId}}", "cancel"]
						},
						"description": "Cancel a confirmed booking. Releases inventory reservation.\n\n**Requirements:**\n- Booking must be in CONFIRMED status"
					},
					"response": []
				}
			],
			"description": "Management phase - Update hotel, room types, inventory, and cancel bookings"
		},
		{
			"name": "5. Internal APIs",
			"item": [
				{
					"name": "5.1 Get Pricing Quote",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer user-123",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"hotelId\": \"hotel-001\",\n    \"roomTypeId\": \"DELUXE\",\n    \"checkIn\": \"2025-01-20\",\n    \"checkOut\": \"2025-01-23\",\n    \"guests\": 2,\n    \"currency\": \"USD\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/v1/internal/pricing/quote",
							"host": ["{{baseUrl}}"],
							"path": ["v1", "internal", "pricing", "quote"]
						},
						"description": "Get pricing quote from pricing intelligence service (internal API)"
					},
					"response": []
				}
			],
			"description": "Internal APIs for pricing intelligence"
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "authToken",
			"value": "user-123",
			"type": "string"
		},
		{
			"key": "bookingId",
			"value": "",
			"type": "string"
		},
		{
			"key": "hotelSlug",
			"value": "grand-hotel-paris",
			"type": "string"
		},
		{
			"key": "offerId",
			"value": "",
			"type": "string"
		},
		{
			"key": "inventoryRowId",
			"value": "",
			"type": "string"
		}
	]
}

